<script>
const API =
  "https://script.google.com/macros/s/AKfycbwgkMXvIQ7jmDtoc4TGya_5BTA8fbin4rmQMGWVeK-tVLMfo3gjdbAlyi79CaHwuMmW/exec";

async function load() {
  const res = await fetch(API + "?t=" + Date.now());
  const data = await res.json();

  const root = document.getElementById("root");
  root.innerHTML = "";

  if (!Array.isArray(data) || data.length === 0) return;

  // âœ… API already newest â†’ oldest
  const top3 = data.slice(0, 3);
  const rest = data.slice(3);

  /* ===== TOP 1 ===== */
  if (top3[0]) {
    root.innerHTML += `
      <div class="top1">
        <div class="crown">ðŸ‘‘</div>
        <div>
          <div class="name">${top3[0].name}</div>
          <div class="time">${top3[0].time}</div>
        </div>
      </div>
    `;
  }

  /* ===== TOP 2 & 3 ===== */
  if (top3[1] || top3[2]) {
    let html = `<div class="row23">`;

    if (top3[1]) {
      html += `
        <div class="top2">
          <div class="medal silver">2</div>
          <div>
            <div>${top3[1].name}</div>
            <div>${top3[1].time}</div>
          </div>
        </div>
      `;
    }

    if (top3[2]) {
      html += `
        <div class="top3">
          <div class="medal bronze">3</div>
          <div>
            <div>${top3[2].name}</div>
            <div>${top3[2].time}</div>
          </div>
        </div>
      `;
    }

    html += `</div>`;
    root.innerHTML += html;
  }

  /* ===== REST (NO NUMBER, STILL NEWEST) ===== */
  rest.forEach(u => {
    root.innerHTML += `
      <div class="item">
        <span>${u.name}</span>
        <span>${u.time}</span>
      </div>
    `;
  });
}

load();
setInterval(load, 3000);
</script>
