<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />

<style>
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@600;700;800&display=swap');

html, body {
  margin: 0;
  width: 1920px;
  height: 1080px;
  background: transparent;
  font-family: 'Be Vietnam Pro', sans-serif;
  color: #fff;
  overflow: hidden;
}

.stage {
  position: relative;
  width: 100%;
  height: 100%;
}

/* ================= PODIUM ================= */
.podium {
  position: absolute;
  top: 220px;
  left: 50%;
  transform: translateX(-50%);
  width: 1000px;
  height: 360px;
}

/* TOP 1 */
.top1 {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
}

.top1 .crown {
  font-size: 80px;
  margin-bottom: 6px;
}

.top1 .card {
  display: inline-flex;
  align-items: center;
  gap: 14px;
  background: #3b3b3b;
  padding: 14px 22px;
  border-radius: 14px;
}

.rank {
  width: 54px;
  height: 54px;
  border-radius: 10px;
  background: #555;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  font-weight: 800;
}

.name {
  font-size: 22px;
  font-weight: 700;
}

.time {
  font-size: 18px;
  opacity: 0.9;
}

/* TOP 2 + 3 */
.top2, .top3 {
  position: absolute;
  top: 120px;
  text-align: center;
}

.top2 { left: 0; }
.top3 { right: 0; }

.small-crown {
  font-size: 42px;
  opacity: 0.8;
  margin-bottom: 4px;
}

.small-card {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  background: #2f2f2f;
  padding: 10px 18px;
  border-radius: 12px;
}

/* ================= LIST ================= */
.list {
  position: absolute;
  top: 650px;
  left: 50%;
  transform: translateX(-50%);
  width: 1000px;
}

.header, .row {
  display: grid;
  grid-template-columns: 80px 1fr 200px 200px;
  padding: 6px 0;
}

.header {
  font-size: 16px;
  opacity: 0.7;
  margin-bottom: 6px;
}

.row {
  font-size: 18px;
}
</style>
</head>

<body>
<div class="stage">
  <div class="podium" id="podium"></div>
  <div class="list" id="list"></div>
</div>

<script>
const API =
  "https://script.google.com/macros/s/AKfycbyRGQUeRDYjMrNAr6xwqQybpQ5BA3LJ_b0ccY_m_kvgC29v_l0K7B6PE5X8pBEvaGeV/exec";

async function load() {
  const res = await fetch(API + "?type=orders&t=" + Date.now());
  const json = await res.json();

  const data = json["G√≥i 1"] || [];
  if (!data.length) return;

  const podium = document.getElementById("podium");
  const list = document.getElementById("list");

  podium.innerHTML = "";
  list.innerHTML = "";

  /* TOP 1 */
  if (data[0]) {
    podium.innerHTML += `
      <div class="top1">
        <div class="crown">üëë</div>
        <div class="card">
          <div class="rank">1</div>
          <div>
            <div class="name">${data[0].name}</div>
            <div class="time">‚è± ${fmt(data[0].time)}</div>
          </div>
        </div>
      </div>`;
  }

  /* TOP 2 */
  if (data[1]) {
    podium.innerHTML += `
      <div class="top2">
        <div class="small-crown">üëë</div>
        <div class="small-card">
          <div class="rank">2</div>
          <div>
            <div class="name">${data[1].name}</div>
            <div class="time">‚è± ${fmt(data[1].time)}</div>
          </div>
        </div>
      </div>`;
  }

  /* TOP 3 */
  if (data[2]) {
    podium.innerHTML += `
      <div class="top3">
        <div class="small-crown">üëë</div>
        <div class="small-card">
          <div class="rank">3</div>
          <div>
            <div class="name">${data[2].name}</div>
            <div class="time">‚è± ${fmt(data[2].time)}</div>
          </div>
        </div>
      </div>`;
  }

  /* LIST HEADER */
  list.innerHTML += `
    <div class="header">
      <div>H·∫†NG</div>
      <div>H·ªå V√Ä T√äN</div>
      <div>TH·ªúI GIAN CH·ªêT</div>
      <div>TH·ªúI GIAN ƒêƒÇNG K√ù</div>
    </div>`;

  /* 4+ */
  data.slice(3).forEach((u, i) => {
    list.innerHTML += `
      <div class="row">
        <div>${i + 4}</div>
        <div>${u.name}</div>
        <div>${fmt(u.time)}</div>
        <div>${fmt(u.time)}</div>
      </div>`;
  });
}

function fmt(ms) {
  const d = new Date(ms);
  return d.toLocaleTimeString("vi-VN", { hour12: false });
}

load();
setInterval(load, 3000);
</script>
</body>
</html>
