<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<style>
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@600;800&display=swap');

body {
  margin: 0;
  background: transparent;
  font-family: 'Be Vietnam Pro', sans-serif;
}

.container { width: 720px; }

/* ===== TOP ===== */
.top1 {
  background: linear-gradient(135deg,#e53935,#ff6f60);
  border-radius: 26px;
  padding: 28px;
  display: flex;
  gap: 18px;
  align-items: center;
  margin-bottom: 18px;
}

.crown { font-size: 48px; animation: float 1.5s infinite ease-in-out; }

@keyframes float {
  0%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
  100%{transform:translateY(0)}
}

.name { font-size: 42px; font-weight: 800; color:#fff }
.time { font-size: 26px; color:#fff }

/* ===== TOP 2-3 ===== */
.row23 {
  display: flex;
  gap: 16px;
  margin-bottom: 50px;
}

.box23 {
  flex:1;
  border-radius: 18px;
  padding: 16px;
  display:flex;
  align-items:center;
  gap:12px;
  font-size:22px;
}

.box2 { background:#90caf9 }
.box3 { background:#ffcc80 }

.rank {
  width:44px;height:44px;border-radius:50%;
  background:#fff;
  display:flex;align-items:center;justify-content:center;
  font-weight:800;
}

/* ===== LIST ===== */
.item {
  display:flex;
  justify-content:space-between;
  font-size:26px;
  margin-bottom:10px;
  color:#000;
}

.highlight {
  animation: blink 1s ease-in-out infinite alternate;
}

@keyframes blink {
  from { opacity:1 }
  to { opacity:0.5 }
}
</style>
</head>

<body>
<div class="container" id="root"></div>

<script>
const API = "https://script.google.com/macros/s/AKfycbyRGQUeRDYjMrNAr6xwqQybpQ5BA3LJ_b0ccY_m_kvgC29v_l0K7B6PE5X8pBEvaGeV/exec?type=orders";
const GOI = "GÃ³i 1";
let lastTopTime = null;

const parse = t => new Date(t).getTime();
const fmt = t => new Date(t).toLocaleTimeString("vi-VN");

async function load() {
  const res = await fetch(API + "&t=" + Date.now());
  const json = await res.json();
  const data = (json[GOI] || []).sort((a,b)=>parse(a.time)-parse(b.time));

  const root = document.getElementById("root");
  root.innerHTML = "";
  if (!data.length) return;

  const isNew = lastTopTime && parse(data[0].time) > lastTopTime;
  lastTopTime = parse(data[0].time);

  root.innerHTML += `
    <div class="top1 ${isNew?'highlight':''}">
      <div class="crown">ðŸ‘‘</div>
      <div>
        <div class="name">${data[0].name}</div>
        <div class="time">ðŸ”¥ ${fmt(data[0].time)}</div>
      </div>
    </div>
  `;

  if (data.length >= 2) {
    let row = `<div class="row23">`;
    if (data[1]) row += `
      <div class="box23 box2">
        <div class="rank">2</div>
        <div>
          <div>${data[1].name}</div>
          <div>ðŸ”¥ ${fmt(data[1].time)}</div>
        </div>
      </div>`;
    if (data[2]) row += `
      <div class="box23 box3">
        <div class="rank">3</div>
        <div>
          <div>${data[2].name}</div>
          <div>ðŸ”¥ ${fmt(data[2].time)}</div>
        </div>
      </div>`;
    row += `</div>`;
    root.innerHTML += row;
  }

  data.slice(3).forEach(u=>{
    root.innerHTML += `
      <div class="item">
        <span>ðŸ‘¤ ${u.name}</span>
        <span>${fmt(u.time)}</span>
      </div>`;
  });
}

load();
setInterval(load,3000);
</script>
</body>
</html>
