<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<style>
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@700;800&display=swap');

body {
  margin:0;
  background:transparent;
  font-family:'Be Vietnam Pro',sans-serif;
}

.box {
  display:flex;
  align-items:center;
  justify-content:center;
  height:60px;
  min-width:80px;
  background:#e0e0e0;
  border-radius:14px;
  font-size:36px;
  font-weight:800;
  color:#000;
}

.bump {
  animation:bump .35s ease;
}

@keyframes bump {
  0%{transform:scale(1)}
  50%{transform:scale(1.25)}
  100%{transform:scale(1)}
}
</style>
</head>

<body>
<div class="box" id="num">0</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbwgkMXvIQ7jmDtoc4TGya_5BTA8fbin4rmQMGWVeK-tVLMfo3gjdbAlyi79CaHwuMmW/exec?type=count";
const GOI = "GÃ³i 3";

let current = 0;

async function load() {
  const res = await fetch(API + "&t=" + Date.now());
  const json = await res.json();
  const target = json?.goi?.[GOI] || 0;
  animate(target);
}

function animate(target) {
  if (target === current) return;

  const el = document.getElementById("num");
  el.classList.remove("bump");
  void el.offsetWidth;
  el.classList.add("bump");

  const step = target > current ? 1 : -1;
  const timer = setInterval(() => {
    current += step;
    el.textContent = current;
    if (current === target) clearInterval(timer);
  }, 60);
}

load();
setInterval(load, 3000);
</script>
</body>
</html>
